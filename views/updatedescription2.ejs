<%-include('partials/header.ejs')%>

    <!--product description update page form-->
    <div class="album py-5 bg-body-tertiary">
      <div class="container ">
          <div class="col-md-7 col-lg-8">
              <h2 class="pb-2 border-bottom">Update Product Description</h2>
              <form class="needs-validation" id="contact-form" action="/product/update-description" method="POST">
                  <div class="row g-3">
                      <div class="col-12">
                          <label for="productId" class="form-label">Select Product Id:</label>
              
                          <select class="form-control" id="productId" name="productId" required>
                            
                          </select>                        
                      </div>
                      <div class="col-12">
                          <label for="productDescription" class="form-label">New Description</label>
                          <input type="text" class="h-100 d-inline-block form-control" id="productDescription" name="productDescription" placeholder="Enter updated description here">
                      </div>
                  </div>
                  <hr class="my-4">
                  <button class="w-100 btn btn-warning btn-lg" type="submit">Send</button>
              </form>
          </div>
      </div>
  </div>
<script>
    async function populateProductDropdown() {
    try {
      const response = await fetch('/product/productslist');
      const products = await response.json();
      const productDropdown = document.getElementById('productId');
      productDropdown.innerHTML = '';
      products?.products.forEach(product => {
        const option = document.createElement('option');
        option.value = product.id;
        option.textContent = product.id;
        productDropdown.appendChild(option);
      });

    } catch (error) {
      console.error('Error fetching products:', error);
      alert('Error fetching products');
    }
  }


  document.addEventListener('DOMContentLoaded', populateProductDropdown);
</script>

<%-include('partials/footer.ejs')%>
